USE ClinVida;

-- 1. Remover um prontu√°rio
DELETE FROM Prontuario
WHERE ProntuarioID = 3;

-- 2. Remover uma consulta (precisa ter o prontu√°rio apagado antes)
DELETE FROM Consulta
WHERE ConsultaID = 3;

-- 3. Remover paciente sem depend√™ncias
DELETE FROM Paciente
WHERE PacienteID = 3;

# ClinVida ‚Äì Projeto SQL (Mini-mundo)

Este reposit√≥rio cont√©m todos os scripts SQL desenvolvidos para o projeto da cl√≠nica **ClinVida**, incluindo cria√ß√£o de tabelas, inser√ß√£o de dados, consultas e manipula√ß√£o (UPDATE/DELETE).

---

## üè• Sobre o Mini-mundo ClinVida

A ClinVida √© uma cl√≠nica m√©dica que realiza consultas, registra prontu√°rios e permite emiss√£o de segunda opini√£o.  
Os principais participantes do sistema s√£o:

- Pacientes  
- M√©dicos  
- Especialidades  
- Consultas  
- Prontu√°rios  
- Endere√ßos  
- Solicita√ß√µes de segunda opini√£o  

O DER foi desenvolvido na Atividade II e utilizado aqui como base para a implementa√ß√£o do banco de dados relacional.

---

## üìÇ Arquivos do Reposit√≥rio

| Arquivo | Descri√ß√£o |
|--------|-----------|
| `01_create_tables.sql` | Script de cria√ß√£o de todas as tabelas utilizando DDL |
| `02_insert_data.sql` | Comandos de inser√ß√£o (INSERT) para povoamento inicial |
| `03_select_queries.sql` | Consultas SELECT (JOIN, WHERE, ORDER BY etc.) |
| `04_updates.sql` | Comandos UPDATE com condi√ß√µes |
| `05_deletes.sql` | Comandos DELETE com condi√ß√µes |
| `DER_ClinVida.png` | Imagem do DER utilizado no projeto |
| `README.md` | Documento explicativo do reposit√≥rio |

---

## üõ†Ô∏è Tecnologias Utilizadas
- MySQL Workbench **ou** PostgreSQL (PGAdmin)
- SQL (DDL e DML)
- Git e GitHub para versionamento

---

## üöÄ Como Executar o Projeto

1. **Clone o reposit√≥rio**
   ```bash
   git clone <URL_DO_SEU_REPOSITORIO>

CREATE DATABASE ClinVida;
USE ClinVida;

-- Tabela de Pacientes
CREATE TABLE Paciente (
    PacienteID INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL,
    DataNascimento DATE NOT NULL,
    Telefone VARCHAR(20),
    Endereco VARCHAR(200)
);

-- Tabela de Especialidades
CREATE TABLE Especialidade (
    EspecialidadeID INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL
);

-- Tabela de M√©dicos
CREATE TABLE Medico (
    MedicoID INT AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(100) NOT NULL,
    EspecialidadeID INT NOT NULL,
    FOREIGN KEY (EspecialidadeID) REFERENCES Especialidade(EspecialidadeID)
);

-- Tabela de Consultas
CREATE TABLE Consulta (
    ConsultaID INT AUTO_INCREMENT PRIMARY KEY,
    PacienteID INT NOT NULL,
    MedicoID INT NOT NULL,
    Data DATE NOT NULL,
    Horario TIME NOT NULL,
    FOREIGN KEY (PacienteID) REFERENCES Paciente(PacienteID),
    FOREIGN KEY (MedicoID) REFERENCES Medico(MedicoID)
);

-- Tabela de Prontu√°rios
CREATE TABLE Prontuario (
    ProntuarioID INT AUTO_INCREMENT PRIMARY KEY,
    ConsultaID INT NOT NULL,
    Descricao TEXT NOT NULL,
    FOREIGN KEY (ConsultaID) REFERENCES Consulta(ConsultaID)
);

USE ClinVida;

-- Inser√ß√£o de Pacientes
INSERT INTO Paciente (Nome, DataNascimento, Telefone, Endereco) VALUES
('Ana Silva', '1990-05-12', '11995667788', 'Rua das Flores, 123'),
('Carlos Pereira', '1984-09-22', '11988776655', 'Av. Paulista, 1000'),
('Beatriz Souza', '2001-01-30', '11944332211', 'Rua Azul, 45');

-- Inser√ß√£o de Especialidades
INSERT INTO Especialidade (Nome) VALUES
('Cardiologia'),
('Dermatologia'),
('Pediatria');

-- Inser√ß√£o de M√©dicos
INSERT INTO Medico (Nome, EspecialidadeID) VALUES
('Dr. Jo√£o Mendes', 1),
('Dra. Paula Ramos', 2),
('Dr. Henrique Lopes', 3);

-- Inser√ß√£o de Consultas
INSERT INTO Consulta (PacienteID, MedicoID, Data, Horario) VALUES
(1, 1, '2025-02-01', '10:00'),
(2, 2, '2025-02-02', '14:30'),
(3, 3, '2025-02-03', '09:15');

-- Inser√ß√£o de Prontu√°rios
INSERT INTO Prontuario (ConsultaID, Descricao) VALUES
(1, 'Paciente relata dor tor√°cica leve.'),
(2, 'Paciente apresenta alergia cut√¢nea.'),
(3, 'Consulta pedi√°trica de rotina.');

-- 1. Consulta com JOIN (m√°s obrigat√≥rio)
SELECT p.Nome AS Paciente, m.Nome AS Medico, e.Nome AS Especialidade, c.Data, c.Horario
FROM Consulta c
JOIN Paciente p ON c.PacienteID = p.PacienteID
JOIN Medico m ON c.MedicoID = m.MedicoID
JOIN Especialidade e ON m.EspecialidadeID = e.EspecialidadeID;

-- 2. Consultas futuras
SELECT * FROM Consulta
WHERE Data >= '2025-02-01';

-- 3. Lista de m√©dicos ordenados
SELECT * FROM Medico
ORDER BY Nome ASC;

-- 4. Consultas de um paciente espec√≠fico
SELECT c.*
FROM Consulta c
WHERE PacienteID = 1;

-- 5. Quantidade de consultas por especialidade
SELECT e.Nome AS Especialidade, COUNT(*) AS TotalConsultas
FROM Especialidade e
JOIN Medico m ON e.EspecialidadeID = m.EspecialidadeID
JOIN Consulta c ON c.MedicoID = m.MedicoID
GROUP BY e.Nome;

USE ClinVida;

-- Atualizar telefone de um paciente
UPDATE Paciente
SET Telefone = '11999998888'
WHERE PacienteID = 1;

-- Atualizar hor√°rio de uma consulta
UPDATE Consulta
SET Horario = '11:00'
WHERE ConsultaID = 1;

-- Atualizar descri√ß√£o do prontu√°rio
UPDATE Prontuario
SET Descricao = 'Atualiza√ß√£o: paciente relata melhora dos sintomas.'
WHERE ProntuarioID = 1;
